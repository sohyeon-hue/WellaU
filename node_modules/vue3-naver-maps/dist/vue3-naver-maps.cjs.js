/*!
  * vue3-naver-maps v4.2.0
  * (c) 2023. Dongkyuuuu All rights reserved.
  * @license MIT
  */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue");const r="%[a-f0-9]{2}",n=new RegExp("("+r+")|([^%]+?)","gi"),t=new RegExp("("+r+")+","gi");function o(e,r){try{return[decodeURIComponent(e.join(""))]}catch{}if(1===e.length)return e;r=r||1;const n=e.slice(0,r),t=e.slice(r);return Array.prototype.concat.call([],o(n),o(t))}function a(e){try{return decodeURIComponent(e)}catch{let r=e.match(n)||[];for(let t=1;t<r.length;t++)r=(e=o(r,t).join("")).match(n)||[];return e}}function u(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return function(e){const r={"%FE%FF":"��","%FF%FE":"��"};let n=t.exec(e);for(;n;){try{r[n[0]]=decodeURIComponent(n[0])}catch{const e=a(n[0]);e!==n[0]&&(r[n[0]]=e)}n=t.exec(e)}r["%C2"]="�";const o=Object.keys(r);for(const n of o)e=e.replace(new RegExp(n,"g"),r[n]);return e}(e)}}function s(e,r){if("string"!=typeof e||"string"!=typeof r)throw new TypeError("Expected the arguments to be of type `string`");if(""===e||""===r)return[];const n=e.indexOf(r);return-1===n?[]:[e.slice(0,n),e.slice(n+r.length)]}function l(e,r){const n={};if(Array.isArray(r))for(const t of r){const r=Object.getOwnPropertyDescriptor(e,t);r?.enumerable&&Object.defineProperty(n,t,r)}else for(const t of Reflect.ownKeys(e)){const o=Object.getOwnPropertyDescriptor(e,t);if(o.enumerable){r(t,e[t],e)&&Object.defineProperty(n,t,o)}}return n}const i=Symbol("encodeFragmentIdentifier");function c(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function p(e,r){return r.encode?r.strict?encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)):encodeURIComponent(e):e}function d(e,r){return r.decode?u(e):e}function v(e){return Array.isArray(e)?e.sort():"object"==typeof e?v(Object.keys(e)).sort(((e,r)=>Number(e)-Number(r))).map((r=>e[r])):e}function m(e){const r=e.indexOf("#");return-1!==r&&(e=e.slice(0,r)),e}function f(e,r){return r.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!r.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function y(e){const r=(e=m(e)).indexOf("?");return-1===r?"":e.slice(r+1)}function g(e,r){c((r={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...r}).arrayFormatSeparator);const n=function(e){let r;switch(e.arrayFormat){case"index":return(e,n,t)=>{r=/\[(\d*)]$/.exec(e),e=e.replace(/\[\d*]$/,""),r?(void 0===t[e]&&(t[e]={}),t[e][r[1]]=n):t[e]=n};case"bracket":return(e,n,t)=>{r=/(\[])$/.exec(e),e=e.replace(/\[]$/,""),r?void 0!==t[e]?t[e]=[...t[e],n]:t[e]=[n]:t[e]=n};case"colon-list-separator":return(e,n,t)=>{r=/(:list)$/.exec(e),e=e.replace(/:list$/,""),r?void 0!==t[e]?t[e]=[...t[e],n]:t[e]=[n]:t[e]=n};case"comma":case"separator":return(r,n,t)=>{const o="string"==typeof n&&n.includes(e.arrayFormatSeparator),a="string"==typeof n&&!o&&d(n,e).includes(e.arrayFormatSeparator);n=a?d(n,e):n;const u=o||a?n.split(e.arrayFormatSeparator).map((r=>d(r,e))):null===n?n:d(n,e);t[r]=u};case"bracket-separator":return(r,n,t)=>{const o=/(\[])$/.test(r);if(r=r.replace(/\[]$/,""),!o)return void(t[r]=n?d(n,e):n);const a=null===n?[]:n.split(e.arrayFormatSeparator).map((r=>d(r,e)));void 0!==t[r]?t[r]=[...t[r],...a]:t[r]=a};default:return(e,r,n)=>{void 0!==n[e]?n[e]=[...[n[e]].flat(),r]:n[e]=r}}}(r),t=Object.create(null);if("string"!=typeof e)return t;if(!(e=e.trim().replace(/^[?#&]/,"")))return t;for(const o of e.split("&")){if(""===o)continue;const e=r.decode?o.replace(/\+/g," "):o;let[a,u]=s(e,"=");void 0===a&&(a=e),u=void 0===u?null:["comma","separator","bracket-separator"].includes(r.arrayFormat)?u:d(u,r),n(d(a,r),u,t)}for(const[e,n]of Object.entries(t))if("object"==typeof n&&null!==n)for(const[e,t]of Object.entries(n))n[e]=f(t,r);else t[e]=f(n,r);return!1===r.sort?t:(!0===r.sort?Object.keys(t).sort():Object.keys(t).sort(r.sort)).reduce(((e,r)=>{const n=t[r];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[r]=v(n):e[r]=n,e}),Object.create(null))}function h(e,r){if(!e)return"";c((r={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...r}).arrayFormatSeparator);const n=n=>r.skipNull&&null==e[n]||r.skipEmptyString&&""===e[n],t=function(e){switch(e.arrayFormat){case"index":return r=>(n,t)=>{const o=n.length;return void 0===t||e.skipNull&&null===t||e.skipEmptyString&&""===t?n:null===t?[...n,[p(r,e),"[",o,"]"].join("")]:[...n,[p(r,e),"[",p(o,e),"]=",p(t,e)].join("")]};case"bracket":return r=>(n,t)=>void 0===t||e.skipNull&&null===t||e.skipEmptyString&&""===t?n:null===t?[...n,[p(r,e),"[]"].join("")]:[...n,[p(r,e),"[]=",p(t,e)].join("")];case"colon-list-separator":return r=>(n,t)=>void 0===t||e.skipNull&&null===t||e.skipEmptyString&&""===t?n:null===t?[...n,[p(r,e),":list="].join("")]:[...n,[p(r,e),":list=",p(t,e)].join("")];case"comma":case"separator":case"bracket-separator":{const r="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(t,o)=>void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?t:(o=null===o?"":o,0===t.length?[[p(n,e),r,p(o,e)].join("")]:[[t,p(o,e)].join(e.arrayFormatSeparator)])}default:return r=>(n,t)=>void 0===t||e.skipNull&&null===t||e.skipEmptyString&&""===t?n:null===t?[...n,p(r,e)]:[...n,[p(r,e),"=",p(t,e)].join("")]}}(r),o={};for(const[r,t]of Object.entries(e))n(r)||(o[r]=t);const a=Object.keys(o);return!1!==r.sort&&a.sort(r.sort),a.map((n=>{const o=e[n];return void 0===o?"":null===o?p(n,r):Array.isArray(o)?0===o.length&&"bracket-separator"===r.arrayFormat?p(n,r)+"[]":o.reduce(t(n),[]).join("&"):p(n,r)+"="+p(o,r)})).filter((e=>e.length>0)).join("&")}function w(e,r){r={decode:!0,...r};let[n,t]=s(e,"#");return void 0===n&&(n=e),{url:n?.split("?")?.[0]??"",query:g(y(e),r),...r&&r.parseFragmentIdentifier&&t?{fragmentIdentifier:d(t,r)}:{}}}function b(e,r){r={encode:!0,strict:!0,[i]:!0,...r};const n=m(e.url).split("?")[0]||"";let t=h({...g(y(e.url),{sort:!1}),...e.query},r);t&&(t=`?${t}`);let o=function(e){let r="";const n=e.indexOf("#");return-1!==n&&(r=e.slice(n)),r}(e.url);if(e.fragmentIdentifier){const t=new URL(n);t.hash=e.fragmentIdentifier,o=r[i]?t.hash:`#${e.fragmentIdentifier}`}return`${n}${t}${o}`}function _(e,r,n){n={parseFragmentIdentifier:!0,[i]:!1,...n};const{url:t,query:o,fragmentIdentifier:a}=w(e,n);return b({url:t,query:l(o,r),fragmentIdentifier:a},n)}var k=Object.freeze({__proto__:null,extract:y,parse:g,stringify:h,parseUrl:w,stringifyUrl:b,pick:_,exclude:function(e,r,n){return _(e,Array.isArray(r)?e=>!r.includes(e):(e,n)=>!r(e,n),n)}});const N=Symbol("vue3-naver-maps-install-options"),E="vue3-naver-maps",j=r=>{if(document.getElementById(E))return;const n=(e=>{if(e.subModules&&!Array.isArray(e.subModules))throw new Error("[vue3-naver-maps] subModules type is array");return`https://oapi.map.naver.com/openapi/v3/maps.js?${k.stringify({[`${e.category??"ncp"}ClientId`]:e.clientId,submodules:e.subModules?.join()??""})}`})(e.inject(N)),t=document.createElement("script");t.setAttribute("id",E),t.setAttribute("type","text/javascript"),t.setAttribute("src",n),t.setAttribute("async",""),t.setAttribute("defer",""),t.onerror=()=>new Error("[vue3-naver-maps] naver script load is failed"),t.onload=()=>r(),document.head.appendChild(t)};const I=e.ref(),O=e.ref(!1),A=e.ref([]),M=["mousedown","mouseup","click","dblclick","rightclick","mouseover","mouseout","mousemove","dragstart","drag","dragend","touchstart","touchmove","touchend","pinchstart","pinch","pinchend","tap","longtap","twofingertap","doubletap"],x=[...M,"addLayer","bounds_changed","center_changed","centerPoint_changed","idle","init_stylemap","keydown","keyup","mapType_changed","mapTypeId_changed","panning","projection_changed","removeLayer","resize","size_changed","tilesloaded","zoom_changed","zooming"],C=["anchorColor_changed","anchorSize_changed","anchorSkew_changed","backgroundColor_changed","borderColor_changed","borderWidth_changed","close","content_changed","disableAnchor_changed","disableAutoPan_changed","maxWidth_changed","open","pixelOffset_changed","position_changed","zIndex_changed"],L=["center_changed","click","clickable_changed","dblclick","mousedown","mouseout","mouseover","mouseup","radius_changed","visible_changed","zIndex_changed"],S=["bounds_changed","click","clickable_changed","dblclick","mousedown","mouseout","mouseover","mouseup","visible_changed","zIndex_changed"],R=["bounds_changed","click","clickable_changed","dblclick","mousedown","mouseout","mouseover","mouseup","visible_changed","zIndex_changed"],U=["click","clickable_changed","dblclick","mousedown","mouseout","mouseover","mouseup","visible_changed","zIndex_changed"],q=["click","clickable_changed","dblclick","mousedown","mouseout","mouseover","mouseup","visible_changed","zIndex_changed"],B=["click","dbclick"];function F(e,r,n){window.naver.maps.Event.addListener(r,n,(r=>e(n,r)))}const T={BACKGROUND:"bg",BACKGROUND_DETAIL:"ol",BICYCLE:"br",CADASTRAL:"lp",CTT:"ctt",HIKING_TRAIL:"ar",PANORAMA:"pr",POI_KOREAN:"lko",TRANSIT:"ts",KOREAN:"lko",ENGLISH:"len",CHINESE:"lzh",JAPANESE:"lja"};var P=(e,r)=>{const n=e.__vccOpts||e;for(const[e,t]of r)n[e]=t;return n},$=P(e.defineComponent({__name:"NaverMap",props:{mapOptions:{type:null,required:!1},initLayers:{type:Array,required:!1}},emits:[...x,"onLoad"],setup(r,{emit:n}){const t=r,o=e.useAttrs(),a=e.ref(),{initLayers:u,mapOptions:s}=e.toRefs(t),l=()=>{var e,r;I.value=new window.naver.maps.Map(a.value,(()=>{const e=s?.value??{},r=(u?.value??[]).map((e=>T[e])).join(".");return e.latitude&&e.longitude&&(e.center=new window.naver.maps.LatLng(e.latitude,e.longitude)),{...e,mapTypes:new window.naver.maps.MapTypeRegistry({normal:window.naver.maps.NaverStyleMapTypeOptions.getNormalMap({overlayType:r}),satellite:window.naver.maps.NaverStyleMapTypeOptions.getSatelliteMap({overlayType:r}),hybrid:window.naver.maps.NaverStyleMapTypeOptions.getHybridMap({overlayType:r}),terrain:window.naver.maps.NaverStyleMapTypeOptions.getTerrainMap({overlayType:r})})}})()),e=n,r=I.value,x.forEach((n=>F(e,r,n))),O.value=!0,A.value.map((e=>e(I.value))),A.value=[],n("onLoad",I.value)};return e.onMounted((()=>{window.naver?l():j(l)})),e.onUnmounted((()=>{I.value?.destroy(),I.value=void 0,O.value=!1})),(r,n)=>(e.openBlock(),e.createElementBlock("div",e.mergeProps({ref_key:"mapElement",ref:a},e.unref(o)),[e.renderSlot(r.$slots,"default")],16))}}),[["__file","/Users/dongkyuuuu/project/toy/vue3-naver-maps/src/components/NaverMap.vue"]]);const z=e=>{O.value?e(I.value):A.value.push(e)};var G=P(e.defineComponent({__name:"NaverMarker",props:{latitude:{type:Number,required:!0},longitude:{type:Number,required:!0},htmlIcon:{type:null,required:!1}},emits:[...M,"onLoad"],setup(r,{emit:n}){const t=r,{latitude:o,longitude:a,htmlIcon:u}=e.toRefs(t),s=e.ref(),l=e.ref(),i=()=>{if(l.value?.childElementCount)return Object.assign({content:l.value},u?.value??{})},c=e=>{if(!o.value||!a.value)throw new Error("[vue3-naver-maps] marker must have latitude, longtitude");var r,t;s.value=new window.naver.maps.Marker({map:e,icon:i(),position:new window.naver.maps.LatLng(o.value,a.value)}),r=n,t=s.value,M.forEach((e=>F(r,t,e))),n("onLoad",s.value)};return e.onMounted((()=>z(c))),e.onUnmounted((()=>{s.value?.setMap(null),s.value=void 0})),(r,n)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"markerElement",ref:l},[e.renderSlot(r.$slots,"default")],512))}}),[["__file","/Users/dongkyuuuu/project/toy/vue3-naver-maps/src/components/NaverMarker.vue"]]),W=P(e.defineComponent({__name:"NaverInfoWindow",props:{marker:{type:null,required:!0},open:{type:Boolean,required:!0},options:{type:null,required:!1}},emits:[...C,"onLoad"],setup(r,{emit:n}){const t=r,{marker:o,options:a,open:u}=e.toRefs(t),s=e.ref(),l=e.ref(),i=()=>{if(!I.value)throw new Error("[vue3-naver-maps] map instance is not initialized");if(!s.value)throw new Error("[vue3-naver-maps] infoWindow is not defined");u.value?s.value.open(I.value,o.value):s.value.close()},c=()=>{const e=Object.assign({content:l.value??""},a?.value??{});var r,t;s.value=new window.naver.maps.InfoWindow(e),i(),r=n,t=s.value,C.forEach((e=>F(r,t,e))),n("onLoad",s.value)};return e.watch((()=>u.value),(()=>i()),{immediate:!1}),e.watch((()=>o.value),(()=>o.value&&z(c)),{immediate:!1}),e.onUnmounted((()=>s.value&&s.value.close())),(r,n)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"infoWindowElement",ref:l},[e.renderSlot(r.$slots,"default")],512))}}),[["__file","/Users/dongkyuuuu/project/toy/vue3-naver-maps/src/components/NaverInfoWindow.vue"]]),D=P(e.defineComponent({__name:"NaverCircle",props:{latitude:{type:Number,required:!0},longitude:{type:Number,required:!0},radius:{type:Number,required:!1},options:{type:null,required:!1}},emits:[...L,"onLoad"],setup(r,{emit:n}){const t=r,{latitude:o,longitude:a,radius:u,options:s}=e.toRefs(t),l=e.ref(),i=e=>{var r,t;l.value=new window.naver.maps.Circle({map:e,center:new window.naver.maps.LatLng(o.value,a.value),radius:u?.value??100,...s?.value}),r=n,t=l.value,L.forEach((e=>F(r,t,e))),n("onLoad",l.value)};return e.onMounted((()=>z(i))),e.onUnmounted((()=>l.value&&l.value.setMap(null))),(r,n)=>(e.openBlock(),e.createElementBlock("div"))}}),[["__file","/Users/dongkyuuuu/project/toy/vue3-naver-maps/src/components/NaverCircle.vue"]]),K=P(e.defineComponent({__name:"NaverEllipse",props:{bounds:{type:null,required:!0},options:{type:null,required:!1}},emits:[...S,"onLoad"],setup(r,{emit:n}){const t=r,{bounds:o,options:a}=e.toRefs(t),u=e.ref(),s=e=>{var r,t;u.value=new window.naver.maps.Ellipse({map:e,bounds:o.value,...a?.value}),r=n,t=u.value,S.forEach((e=>F(r,t,e))),n("onLoad",u.value)};return e.onMounted((()=>z(s))),e.onUnmounted((()=>u.value&&u.value.setMap(null))),(r,n)=>(e.openBlock(),e.createElementBlock("div"))}}),[["__file","/Users/dongkyuuuu/project/toy/vue3-naver-maps/src/components/NaverEllipse.vue"]]),H=P(e.defineComponent({__name:"NaverGroundOverlay",props:{url:{type:String,required:!0},bounds:{type:null,required:!0},options:{type:null,required:!1}},emits:[...B,"onLoad"],setup(r,{emit:n}){const t=r,{url:o,bounds:a,options:u}=e.toRefs(t),s=e.ref(),l=e=>{var r,t;s.value=new window.naver.maps.GroundOverlay(o.value,a.value,{map:e,...u?.value}),r=n,t=s.value,B.forEach((e=>F(r,t,e))),n("onLoad",s.value)};return e.onMounted((()=>z(l))),e.onUnmounted((()=>s.value&&s.value.setMap(null))),(r,n)=>(e.openBlock(),e.createElementBlock("div"))}}),[["__file","/Users/dongkyuuuu/project/toy/vue3-naver-maps/src/components/NaverGroundOverlay.vue"]]),J=P(e.defineComponent({__name:"NaverPolygon",props:{paths:{type:Array,required:!0},options:{type:null,required:!1}},emits:[...U,"onLoad"],setup(r,{emit:n}){const t=r,{paths:o,options:a}=e.toRefs(t),u=e.ref(),s=e=>{var r,t;u.value=new window.naver.maps.Polygon({map:e,paths:o.value,...a?.value}),r=n,t=u.value,U.forEach((e=>F(r,t,e))),n("onLoad",u.value)};return e.onMounted((()=>z(s))),e.onUnmounted((()=>u.value&&u.value.setMap(null))),(r,n)=>(e.openBlock(),e.createElementBlock("div"))}}),[["__file","/Users/dongkyuuuu/project/toy/vue3-naver-maps/src/components/NaverPolygon.vue"]]),Y=P(e.defineComponent({__name:"NaverPolyline",props:{path:{type:Array,required:!0},options:{type:null,required:!1}},emits:[...q,"onLoad"],setup(r,{emit:n}){const t=r,{path:o,options:a}=e.toRefs(t),u=e.ref(),s=e=>{var r,t;u.value=new window.naver.maps.Polyline({map:e,path:o.value,...a?.value}),r=n,t=u.value,q.forEach((e=>F(r,t,e))),n("onLoad",u.value)};return e.onMounted((()=>z(s))),e.onUnmounted((()=>u.value&&u.value.setMap(null))),(r,n)=>(e.openBlock(),e.createElementBlock("div"))}}),[["__file","/Users/dongkyuuuu/project/toy/vue3-naver-maps/src/components/NaverPolyline.vue"]]),Q=P(e.defineComponent({__name:"NaverRectangle",props:{bounds:{type:null,required:!0},options:{type:null,required:!1}},emits:[...R,"onLoad"],setup(r,{emit:n}){const t=r,{bounds:o,options:a}=e.toRefs(t),u=e.ref(),s=e=>{var r,t;u.value=new window.naver.maps.Rectangle({map:e,bounds:o.value,...a?.value}),r=n,t=u.value,R.forEach((e=>F(r,t,e))),n("onLoad",u.value)};return e.onMounted((()=>z(s))),e.onUnmounted((()=>u.value&&u.value.setMap(null))),(r,n)=>(e.openBlock(),e.createElementBlock("div"))}}),[["__file","/Users/dongkyuuuu/project/toy/vue3-naver-maps/src/components/NaverRectangle.vue"]]);exports.NaverCircle=D,exports.NaverEllipse=K,exports.NaverGroundOverlay=H,exports.NaverInfoWindow=W,exports.NaverMap=$,exports.NaverMarker=G,exports.NaverPolygon=J,exports.NaverPolyline=Y,exports.NaverRectangle=Q,exports.createNaverMap=function(e,r){if(!r.clientId)throw new Error("[vue3-naver-maps] options must be included clientId");e.provide(N,r)};
