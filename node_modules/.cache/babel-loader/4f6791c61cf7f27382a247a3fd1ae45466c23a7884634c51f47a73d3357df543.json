{"ast":null,"code":"import { ref, watch, onMounted } from 'vue';\nexport default {\n  __name: 'TimeCircle',\n  props: {\n    num: {\n      type: String,\n      default: () => {\n        return \"\";\n      }\n    },\n    time: {\n      type: Number,\n      default: () => {\n        return 60000;\n      }\n    }\n  },\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const props = __props;\n    const canvas = ref(\"canvas\");\n    let timer = null;\n    watch(() => props.num, n => {\n      console.log(\"watch : \", n);\n    }, {\n      immediate: true\n    });\n    onMounted(() => {\n      start();\n      function start() {\n        let angle = 0;\n        const oneStep = 100;\n        const totalTime = props.time;\n        const circlePrice = 6.3;\n        const circlePrice2 = 360;\n        const circleSize = 10;\n        clearInterval(timer);\n        timer = setInterval(() => {\n          angle += circlePrice / (totalTime / oneStep);\n          draw(angle);\n          if (angle >= circlePrice) {\n            clearInterval(timer);\n          }\n        }, oneStep);\n        function draw(angle) {\n          const exchangeAngle = circlePrice2 / circlePrice * angle;\n          const ctx = canvas.value.getContext(\"2d\");\n          ctx.clearRect(0, 0, canvas.value.width, canvas.value.height);\n          ctx.beginPath();\n          ctx.moveTo(canvas.value.width / 2, canvas.value.height / 2);\n          ctx.arc(canvas.value.width / 2, canvas.value.height / 2, canvas.value.width / 2, 0, Math.PI / 180 * exchangeAngle, false);\n          ctx.closePath();\n          ctx.fillStyle = \"red\";\n          ctx.fill();\n          ctx.beginPath();\n          ctx.moveTo(canvas.value.width / 2, canvas.value.height / 2);\n          ctx.arc(canvas.value.width / 2, canvas.value.height / 2, canvas.value.width / 2 - circleSize, 0, Math.PI / 180 * 360, false);\n          ctx.closePath();\n          ctx.fillStyle = \"#fff\";\n          ctx.fill();\n          ctx.closePath();\n          ctx.beginPath();\n          ctx.moveTo(canvas.value.width - circleSize / 2, canvas.value.height / 2);\n          ctx.arc(canvas.value.width - circleSize / 2, canvas.value.height / 2, circleSize / 2, 0, Math.PI / 180 * 360, false);\n          ctx.fillStyle = \"red\";\n          ctx.fill();\n          ctx.closePath();\n          const left = canvas.value.width / 2 + (canvas.value.width / 2 - circleSize / 2) * Math.cos(angle);\n          const top = canvas.value.height / 2 + (canvas.value.height / 2 - circleSize / 2) * Math.sin(angle);\n          ctx.beginPath();\n          ctx.moveTo(left, top);\n          ctx.arc(left, top, circleSize / 2, Math.PI / 180 * 360, false);\n          ctx.fill();\n          ctx.closePath();\n          ctx.moveTo(0, 0);\n          ctx.rotate(90 * Math.PI / 180);\n          ctx.beginPath();\n          ctx.font = \"bold 100rem Noto Sans KR\";\n          ctx.textAlign = \"center\";\n          ctx.fillStyle = \"red\";\n          ctx.fillText(props.num, canvas.value.width / 2 - 3, canvas.value.width / 2 * -1 + 38);\n          ctx.setTransform(1, 0, 0, 1, 0, 0);\n        }\n      }\n    });\n    const __returned__ = {\n      props,\n      canvas,\n      get timer() {\n        return timer;\n      },\n      set timer(v) {\n        timer = v;\n      },\n      ref,\n      watch,\n      onMounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","watch","onMounted","props","__props","canvas","timer","num","n","console","log","immediate","start","angle","oneStep","totalTime","time","circlePrice","circlePrice2","circleSize","clearInterval","setInterval","draw","exchangeAngle","ctx","value","getContext","clearRect","width","height","beginPath","moveTo","arc","Math","PI","closePath","fillStyle","fill","left","cos","top","sin","rotate","font","textAlign","fillText","setTransform"],"sources":["/Users/gimgaui/Documents/documents/vue/WellaU/WellaU/src/components/TimeCircle.vue"],"sourcesContent":["<template>\n    <div>\n        <canvas id=\"myCanvas\" height=\"200\" width=\"200\" ref=\"canvas\" style=\"transform:rotate(-90deg);\"></canvas>\n    </div>\n</template>\n<script setup>\n    import { ref,defineProps,watch,onMounted } from 'vue'\n\n    const props = defineProps({\n        num : {\n            type : String,\n            default : ()=>{\n                return \"\";\n            }\n        },\n        time : {\n            type : Number,\n            default : ()=>{\n                return 60000;\n            }\n        }\n    })\n\n    const canvas = ref(\"canvas\");\n    let timer = null;\n    watch(()=>props.num,(n)=>{\n        console.log(\"watch : \",n)\n    },{immediate : true})\n    onMounted(()=>{\n        start();\n        function start(){\n            let angle = 0;\n            const oneStep = 100;\n            const totalTime = props.time;\n            const circlePrice = 6.3;\n            const circlePrice2 = 360;\n            const circleSize = 10;\n            clearInterval(timer)\n            timer = setInterval(()=>{\n                angle += circlePrice / (totalTime / oneStep);\n                draw(angle);\n                if(angle >= circlePrice){\n                    clearInterval(timer);\n                }\n            },oneStep)\n            function draw(angle){\n                const exchangeAngle = (circlePrice2 / circlePrice) * angle\n                const ctx = canvas.value.getContext(\"2d\");\n                ctx.clearRect(0,0,canvas.value.width, canvas.value.height);\n                ctx.beginPath();\n                ctx.moveTo((canvas.value.width / 2),(canvas.value.height / 2));\n                ctx.arc((canvas.value.width / 2),(canvas.value.height / 2),(canvas.value.width / 2),0,(Math.PI/180) * exchangeAngle,false);\n                ctx.closePath();\n                ctx.fillStyle = \"red\";\n                ctx.fill();\n                \n                ctx.beginPath();\n                ctx.moveTo((canvas.value.width / 2),(canvas.value.height / 2));\n                ctx.arc((canvas.value.width / 2),(canvas.value.height / 2),((canvas.value.width / 2) - (circleSize)),0,(Math.PI/180) * 360,false);\n                ctx.closePath();\n                ctx.fillStyle = \"#fff\";\n                ctx.fill();\n                ctx.closePath();\n\n                ctx.beginPath();\n                ctx.moveTo(canvas.value.width - (circleSize / 2),canvas.value.height / 2)\n                ctx.arc(canvas.value.width - (circleSize / 2),canvas.value.height / 2,(circleSize / 2),0,(Math.PI/180)*360,false);\n                ctx.fillStyle = \"red\";\n                ctx.fill();\n                ctx.closePath();\n\n                const left = canvas.value.width / 2 + ((canvas.value.width / 2) - (circleSize / 2) ) * Math.cos(angle);\n                const top = canvas.value.height / 2 + ((canvas.value.height / 2) - (circleSize / 2) ) * Math.sin(angle);\n                ctx.beginPath();\n                ctx.moveTo(left,top);\n                ctx.arc(left,top,(circleSize / 2),(Math.PI / 180) * 360, false);\n                ctx.fill();\n                ctx.closePath();\n\n                ctx.moveTo(0,0)\n                ctx.rotate(90 * Math.PI / 180);\n                ctx.beginPath();\n                ctx.font=\"bold 100rem Noto Sans KR\"\n                ctx.textAlign = \"center\"\n                ctx.fillStyle = \"red\"\n                ctx.fillText(props.num,((canvas.value.width / 2)) - 3,((canvas.value.width / 2) * -1) + 38);\n                ctx.setTransform(1,0,0,1,0,0);\n            }\n\n        }\n    })\n</script>\n<style type=\"scss\" scoped>\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}