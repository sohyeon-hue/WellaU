{"ast":null,"code":"import { ref, watch, onBeforeUnmount } from 'vue';\nexport default {\n  __name: 'TimeCircle',\n  props: {\n    num: {\n      type: Number,\n      default: () => {\n        return \"\";\n      }\n    },\n    time: {\n      type: Number,\n      default: () => {\n        return 60000;\n      }\n    },\n    bgColor: {\n      type: String,\n      default: () => {\n        return \"#FF3B2E\";\n      }\n    }\n  },\n  emits: ['click', 'timeout'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    const props = __props;\n    const stop = () => {\n      clearInterval(timer);\n      timer = null;\n      angle = 0;\n    };\n    const pause = () => {\n      clearInterval(timer);\n      timer = null;\n    };\n    const emits = __emit;\n    const canvas = ref(\"canvas\");\n    let timer = null;\n    let angle = 0;\n    function start() {\n      const oneStep = 100;\n      const totalTime = props.time;\n      const circlePrice = 6.3;\n      const circlePrice2 = 360;\n      const circleSize = 5;\n      clearInterval(timer);\n      timer = setInterval(() => {\n        angle += circlePrice / (totalTime / oneStep);\n        draw(angle);\n        if (angle >= circlePrice) {\n          clearInterval(timer);\n          timer = null;\n          emits(\"timeout\");\n        }\n      }, oneStep);\n      function draw(angle) {\n        const exchangeAngle = circlePrice2 / circlePrice * angle;\n        const ctx = canvas.value.getContext(\"2d\");\n        ctx.clearRect(0, 0, canvas.value.width, canvas.value.height);\n        ctx.beginPath();\n        ctx.fillStyle = props.bgColor;\n        ctx.fillRect(0, 0, canvas.value.width, canvas.value.height);\n        ctx.closePath();\n        ctx.beginPath();\n        ctx.moveTo(canvas.value.width / 2, canvas.value.height / 2);\n        ctx.arc(canvas.value.width / 2, canvas.value.height / 2, canvas.value.width / 2, canvas.value.height / 2, 0, Math.PI / 180 * 360, false);\n        ctx.fillStyle = \"rgba(255,255,255,0.3)\";\n        ctx.fill();\n        ctx.closePath();\n        ctx.beginPath();\n        ctx.moveTo(canvas.value.width / 2, canvas.value.height / 2);\n        ctx.arc(canvas.value.width / 2, canvas.value.height / 2, canvas.value.width / 2, 0, Math.PI / 180 * exchangeAngle, false);\n        ctx.closePath();\n        ctx.fillStyle = \"#fff\";\n        ctx.fill();\n        ctx.beginPath();\n        ctx.moveTo(canvas.value.width / 2, canvas.value.height / 2);\n        ctx.arc(canvas.value.width / 2, canvas.value.height / 2, canvas.value.width / 2 - circleSize, 0, Math.PI / 180 * 360, false);\n        ctx.closePath();\n        ctx.fillStyle = props.bgColor;\n        ctx.fill();\n        ctx.closePath();\n        ctx.beginPath();\n        ctx.moveTo(canvas.value.width - circleSize / 2, canvas.value.height / 2);\n        ctx.arc(canvas.value.width - circleSize / 2, canvas.value.height / 2, circleSize / 2, 0, Math.PI / 180 * 360, false);\n        ctx.fillStyle = \"#fff\";\n        ctx.fill();\n        ctx.closePath();\n        const left = canvas.value.width / 2 + (canvas.value.width / 2 - circleSize / 2) * Math.cos(angle);\n        const top = canvas.value.height / 2 + (canvas.value.height / 2 - circleSize / 2) * Math.sin(angle);\n        ctx.beginPath();\n        ctx.moveTo(left, top);\n        ctx.arc(left, top, circleSize / 2, Math.PI / 180 * 360, false);\n        ctx.fillStyle = \"#fff\";\n        ctx.fill();\n        ctx.closePath();\n        ctx.moveTo(0, 0);\n        ctx.rotate(90 * Math.PI / 180);\n        ctx.beginPath();\n        ctx.font = \"bold 100rem Noto Sans KR\";\n        ctx.textAlign = \"center\";\n        ctx.fillStyle = \"#fff\";\n        ctx.fillText(props.num, canvas.value.width / 2 - 3, canvas.value.width / 2 * -1 + 38);\n        ctx.setTransform(1, 0, 0, 1, 0, 0);\n      }\n    }\n    const click = () => {\n      const checked = timer ? true : false;\n      emits(\"click\", checked);\n    };\n    const getState = () => {\n      const checked = timer ? true : false;\n      return checked;\n    };\n    watch(() => props.num, () => {\n      start();\n    }, {\n      immediate: true\n    });\n    onBeforeUnmount(() => {\n      clearInterval(timer);\n    });\n    __expose({\n      start,\n      stop,\n      pause,\n      getState\n    });\n    const __returned__ = {\n      props,\n      stop,\n      pause,\n      emits,\n      canvas,\n      get timer() {\n        return timer;\n      },\n      set timer(v) {\n        timer = v;\n      },\n      get angle() {\n        return angle;\n      },\n      set angle(v) {\n        angle = v;\n      },\n      start,\n      click,\n      getState,\n      ref,\n      watch,\n      onBeforeUnmount\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","watch","onBeforeUnmount","props","__props","stop","clearInterval","timer","angle","pause","emits","__emit","canvas","start","oneStep","totalTime","time","circlePrice","circlePrice2","circleSize","setInterval","draw","exchangeAngle","ctx","value","getContext","clearRect","width","height","beginPath","fillStyle","bgColor","fillRect","closePath","moveTo","arc","Math","PI","fill","left","cos","top","sin","rotate","font","textAlign","fillText","num","setTransform","click","checked","getState","immediate","__expose"],"sources":["/Users/gimgaui/Documents/documents/vue/WellaU/WellaU/src/components/TimeCircle.vue"],"sourcesContent":["<template>\n    <div @click=\"click\">\n        <canvas id=\"myCanvas\" height=\"220\" width=\"220\" ref=\"canvas\" style=\"transform:rotate(-90deg);\"></canvas>\n    </div>\n</template>\n<script setup>\n    import { ref,defineProps,watch,defineEmits,onBeforeUnmount,defineExpose } from 'vue'\n\n    const props = defineProps({\n        num : {\n            type : Number,\n            default : ()=>{\n                return \"\";\n            }\n        },\n        time : {\n            type : Number,\n            default : ()=>{\n                return 60000;\n            }\n        },\n        bgColor :{\n            type : String,\n            default : ()=>{\n                return \"#FF3B2E\";\n            }\n        }\n    })\n    const stop = ()=>{\n        clearInterval(timer);\n        timer = null;\n        angle = 0;\n    }\n    const pause = ()=>{\n        clearInterval(timer);\n        timer = null;\n    }\n    const emits = defineEmits(['click','timeout'])\n    const canvas = ref(\"canvas\");\n    let timer = null;\n    let angle = 0;\n    function start(){\n        const oneStep = 100;\n        const totalTime = props.time;\n        const circlePrice = 6.3;\n        const circlePrice2 = 360;\n        const circleSize = 5;\n        clearInterval(timer)\n        timer = setInterval(()=>{\n            angle += circlePrice / (totalTime / oneStep);\n            draw(angle);\n            if(angle >= circlePrice){\n                clearInterval(timer);\n                timer = null\n                emits(\"timeout\")\n            }\n        },oneStep)\n        function draw(angle){\n            const exchangeAngle = (circlePrice2 / circlePrice) * angle\n            const ctx = canvas.value.getContext(\"2d\");\n            ctx.clearRect(0,0,canvas.value.width, canvas.value.height);\n\n            ctx.beginPath();\n            ctx.fillStyle = props.bgColor;\n            ctx.fillRect(0,0,canvas.value.width,canvas.value.height);\n            ctx.closePath();\n\n\n            ctx.beginPath();\n            ctx.moveTo((canvas.value.width / 2),(canvas.value.height / 2));\n            ctx.arc((canvas.value.width / 2),(canvas.value.height / 2),(canvas.value.width / 2),(canvas.value.height / 2),0,(Math.PI/180) * 360,false);\n            ctx.fillStyle = \"rgba(255,255,255,0.3)\";\n            ctx.fill();\n            ctx.closePath();\n\n            ctx.beginPath();\n            ctx.moveTo((canvas.value.width / 2),(canvas.value.height / 2));\n            ctx.arc((canvas.value.width / 2),(canvas.value.height / 2),(canvas.value.width / 2),0,(Math.PI/180) * exchangeAngle,false);\n            ctx.closePath();\n            ctx.fillStyle = \"#fff\";\n            ctx.fill();\n            \n            ctx.beginPath();\n            ctx.moveTo((canvas.value.width / 2),(canvas.value.height / 2));\n            ctx.arc((canvas.value.width / 2),(canvas.value.height / 2),((canvas.value.width / 2) - (circleSize)),0,(Math.PI/180) * 360,false);\n            ctx.closePath();\n            ctx.fillStyle = props.bgColor;\n            ctx.fill();\n            ctx.closePath();\n\n            ctx.beginPath();\n            ctx.moveTo(canvas.value.width - (circleSize / 2),canvas.value.height / 2)\n            ctx.arc(canvas.value.width - (circleSize / 2),canvas.value.height / 2,(circleSize / 2),0,(Math.PI/180)*360,false);\n            ctx.fillStyle = \"#fff\";\n            ctx.fill();\n            ctx.closePath();\n\n            const left = canvas.value.width / 2 + ((canvas.value.width / 2) - (circleSize / 2) ) * Math.cos(angle);\n            const top = canvas.value.height / 2 + ((canvas.value.height / 2) - (circleSize / 2) ) * Math.sin(angle);\n            ctx.beginPath();\n            ctx.moveTo(left,top);\n            ctx.arc(left,top,(circleSize / 2),(Math.PI / 180) * 360, false);\n            ctx.fillStyle = \"#fff\";\n            ctx.fill();\n            ctx.closePath();\n\n            ctx.moveTo(0,0)\n            ctx.rotate(90 * Math.PI / 180);\n            ctx.beginPath();\n            ctx.font=\"bold 100rem Noto Sans KR\"\n            ctx.textAlign = \"center\"\n            ctx.fillStyle = \"#fff\"\n            ctx.fillText(props.num,((canvas.value.width / 2)) - 3,((canvas.value.width / 2) * -1) + 38);\n            ctx.setTransform(1,0,0,1,0,0);\n        }\n\n    }\n    const click = ()=>{\n        const checked = timer ? true : false;\n        emits(\"click\",checked);\n    }\n    const getState = ()=>{\n        const checked = timer ? true : false;\n        return checked;\n    }\n    watch(()=>props.num,()=>{\n        start();\n    },{immediate : true})\n\n    onBeforeUnmount(()=>{\n        clearInterval(timer);\n    })\n    defineExpose({\n        start,\n        stop,\n        pause,\n        getState,\n    })\n</script>\n<style type=\"scss\" scoped>\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}